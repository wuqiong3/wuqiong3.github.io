System.register("chunks:///_virtual/BackgroundScroller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,r,n,e,s,a,c,u,l,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,r=i.createForOfIteratorHelperLoose,n=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,c=i.Node,u=i.Camera,l=i.UITransform,d=i.Component}],execute:function(){var h,p,g,f,b,k,v;s._RF.push({},"94c39Y9E9JOxb3L914uU7Sp","BackgroundScroller",void 0);var _=a.ccclass,w=a.property;i("BackgroundScroller",(h=_("BackgroundScroller"),p=w([c]),g=w(u),h((k=t((b=function(i){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,n(t,"backgrounds",k,e(t)),n(t,"camera",v,e(t)),t._width=0,t._initialized=!1,t}o(t,i);var s=t.prototype;return s.start=function(){this.initBackgrounds()},s.initBackgrounds=function(){if(this.backgrounds.length<2)console.warn("[BackgroundScroller] backgrounds 少于2，无法循环滚动");else{var i=this.backgrounds[0].getComponent(l);this._width=i?i.width*this.backgrounds[0].scale.x:2370;for(var t=0;t<this.backgrounds.length;t++)this.backgrounds[t].setPosition(1625+t*this._width,-79,0);this._initialized=!0}},s.update=function(i){if(this._initialized&&this.camera){for(var t,o=this.camera.node.position.x,n=this.backgrounds[0],e=this.backgrounds[0],s=r(this.backgrounds);!(t=s()).done;){var a=t.value;a.position.x>n.position.x&&(n=a),a.position.x<e.position.x&&(e=a)}for(var c,u=r(this.backgrounds);!(c=u()).done;){var l=c.value;o-l.position.x>this._width?(l.setPosition(n.position.x+this._width,l.position.y,l.position.z),n=l):l.position.x-o>this._width&&(l.setPosition(e.position.x-this._width,l.position.y,l.position.z),e=l)}}},t}(d)).prototype,"backgrounds",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(b.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlatformType2.ts","./PlayerController.ts"],(function(t){var n,e,i,o,r,a,l,s,u,h,f,c,p,m,d,g,_,v,x,C,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,o=t.createClass,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,u=t.Node,h=t.Camera,f=t.Prefab,c=t.input,p=t.Input,m=t.UITransform,d=t.instantiate,g=t.math,_=t.assetManager,v=t.Component},function(t){x=t.PlatformType,C=t.PlatformKind},function(t){y=t.PlayerController}],execute:function(){var P,k,b,w,T,A,B,S,L,N,K,M,z,D,G,E,Y;l._RF.push({},"e0c100uNslNKYCv+TlfkIUn","GameManager",void 0);var F=s.ccclass,I=s.property;t("GameManager",(P=F("GameManager"),k=I(u),b=I(h),w=I(f),T=I(f),P((S=n((B=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i))||this,r(n,"player",S,a(n)),r(n,"camera",L,a(n)),r(n,"normalPlatformPrefab",N,a(n)),r(n,"spikePlatformPrefab",K,a(n)),n._levelBundleLoading=!1,n._levelBundleLoaded=!1,n._prefabsReady=!1,n._pendingSpawnKinds=[],r(n,"normminDistance",M,a(n)),r(n,"normmaxDistance",z,a(n)),r(n,"spikeminDistance",D,a(n)),r(n,"spikemaxDistance",G,a(n)),r(n,"cameraOffsetX",E,a(n)),r(n,"cameraOffsetY",Y,a(n)),n._playerCtrl=null,n._currentPlatform=null,n._nextPlatform=null,n._nextKind=C.Normal,n._cameraBaseY=0,n._groundY=-175,n._spikeChainCount=0,n._autoBounceQueue=[],n._inAutoChain=!1,n._normalCount=0,n._win=!1,n._winTriggered=!1,n}e(n,t);var l=n.prototype;return l.onLoad=function(){c.on(p.EventType.TOUCH_START,this.onTouchStart,this),c.on(p.EventType.TOUCH_END,this.onTouchEnd,this)},l.start=function(){this.camera&&(this._cameraBaseY=this.camera.node.position.y),this.setupExistingPlatforms(),this.player&&(this._playerCtrl=this.player.getComponent(y),this._playerCtrl&&(this._playerCtrl.eventTarget.on("landed",this.onPlayerLanded,this),this._playerCtrl.setGroundY(this._groundY))),this.tryLoadLevelBundle()},l.onPlayerLanded=function(){this.checkLanding()},l.getPlatformsInScene=function(){var t=this;return this.node.children.filter((function(n){return n!==t.player&&n.getComponent(x)}))},l.getRightmostPlatform=function(){var t=this.getPlatformsInScene();return 0===t.length?null:t.reduce((function(t,n){return n.position.x>t.position.x?n:t}))},l.getPlatformWidth=function(t){var n=t.getComponent(m);return n?n.width*t.scale.x:160},l.spawnAdjacentPlatform=function(t){if(this._win)return null;if(t===C.Normal&&this._normalCount>=51)return null;if(this._normalCount>=51)return null;var n=this.getRightmostPlatform();if(!n)return console.warn("[GameManager] 无基准平台，无法紧贴生成"),null;var e=t===C.Normal?this.normalPlatformPrefab:this.spikePlatformPrefab;if(!e)return this._pendingSpawnKinds.push(t),this._levelBundleLoaded?console.log("[GameManager] 预制未就绪，等待分包内资源加载完成"):(this.tryLoadLevelBundle(),console.log("[GameManager] 预制未就绪，触发 level 分包加载")),null;var i,o=d(e);if(this.node.addChild(o),t===C.Normal){var r=this._normalCount+1,a=g.randomRangeInt(this.normminDistance,this.normmaxDistance+1);i=a,r>=31&&r<=40&&(i=Math.max(40,Math.floor(.5*a)),console.log("[NormalSize] 第"+r+"个Normal平台长度减半 原宽="+a+" 新宽="+i))}else i=g.randomRangeInt(this.spikeminDistance,this.spikemaxDistance+1);var l=o.getComponent(m);l&&l.width>0?o.setScale(i/l.width,1,1):o.setScale(i/160,1,1);var s=this.getPlatformWidth(n),u=this.getPlatformWidth(o),h=n.position.x+.5*(s+u);return o.setPosition(h,this._groundY,0),o.getComponent(x).kind=t,t===C.Normal&&(this._normalCount++,51===this._normalCount&&console.log("[Limit] 已生成第51个Normal，停止后续平台生成")),o},l.nextKindAndToggle=function(){var t=this._nextKind;return this._nextKind=this._nextKind===C.Normal?C.Spike:C.Normal,t},l.setupExistingPlatforms=function(){var t,n,e=this.getPlatformsInScene().sort((function(t,n){return t.position.x-n.position.x}));if(0!==e.length){var i=e.find((function(t){var n;return(null==(n=t.getComponent(x))?void 0:n.kind)===C.Normal}));if(this._groundY=i?i.position.y:0,this._playerCtrl&&this._playerCtrl.setGroundY(this._groundY),this._normalCount=e.filter((function(t){var n;return(null==(n=t.getComponent(x))?void 0:n.kind)===C.Normal})).length,this._currentPlatform=e[0],this._nextPlatform=e.length>1?e[1]:null,this._nextPlatform){var o,r=null==(o=this._nextPlatform.getComponent(x))?void 0:o.kind;void 0!==r&&(this._nextKind=r===C.Normal?C.Spike:C.Normal)}else if(this._currentPlatform){var a,l=null==(a=this._currentPlatform.getComponent(x))?void 0:a.kind;void 0!==l&&(this._nextKind=l===C.Normal?C.Spike:C.Normal)}if(!this._nextPlatform){var s=this.nextKindAndToggle();this._nextPlatform=this.spawnAdjacentPlatform(s)}this.updateCamera(),console.log("[GameManager] 已读取场景平台: current=",null==(t=this._currentPlatform)?void 0:t.position.x,"next=",null==(n=this._nextPlatform)?void 0:n.position.x,"nextKindToGenerate=",this._nextKind,"已有Normal数量=",this._normalCount,"groundY=",this._groundY)}else console.warn("[GameManager] 场景没有已有平台，考虑手动拖入或恢复 spawnInitialPlatforms()")},l.tryLoadLevelBundle=function(){var t=this;this._levelBundleLoaded||this._levelBundleLoading||(this._levelBundleLoading=!0,_.loadBundle("level",(function(n,e){if(t._levelBundleLoading=!1,!n&&e){t._levelBundleLoaded=!0;var o=!1,r=!1,a=function(){if(!t._prefabsReady&&o&&r){t._prefabsReady=!0,console.log("[GameManager] 两个预制体已就绪");for(var n,e=t._pendingSpawnKinds.splice(0),a=i(e);!(n=a()).done;){var l=n.value;t.spawnAdjacentPlatform(l)}t.ensureFuturePlatform()}};e.load("grass",f,(function(n,e){n||!e?console.warn("[GameManager] grass 预制加载失败",n):(t.normalPlatformPrefab=e,o=!0,a())})),e.load("spike",f,(function(n,e){n||!e?console.warn("[GameManager] spike 预制加载失败",n):(t.spikePlatformPrefab=e,r=!0,a())}))}else console.warn("[GameManager] 加载 level 分包失败",n)})))},l.onTouchStart=function(t){var n;if(this.player&&this._playerCtrl&&!this._playerCtrl.isJumping){this._playerCtrl.beginCharge();var e=null==(n=this._currentPlatform)||null==(n=n.getComponent(x))?void 0:n.kind;console.log("[TouchStart] begin charge. curKind=",e)}},l.onTouchEnd=function(t){var n;if(this.player&&this._playerCtrl&&!this._playerCtrl.isJumping){if(!this._nextPlatform&&this._currentPlatform){console.warn("[TouchEnd] _nextPlatform 缺失，尝试兜底生成");var e=this.nextKindAndToggle(),i=this.spawnAdjacentPlatform(e);if(!i)return void console.error("[TouchEnd] 兜底生成失败，无法跳跃");this._nextPlatform=i,this.updateCamera()}this._nextPlatform&&(this._playerCtrl.endChargeAndJumpToX(this._nextPlatform.position.x),console.log("[Jump] toX=",this._nextPlatform.position.x.toFixed(1),"targetKind=",null==(n=this._nextPlatform.getComponent(x))?void 0:n.kind))}},l.update=function(t){this.updateCamera(),this.ensureFuturePlatform(),this.checkVictory()},l.checkLanding=function(){if(this.player){for(var t,n=this.player.position.x,e=this.getPlatformsInScene(),o=null,r=1/0,a=this.player.getComponent(m),l=a?a.width*this.player.scale.x*.5:40,s=i(e);!(t=s()).done;){var u=t.value,h=u.getComponent(m),f=(h?h.width*u.scale.x*.5:80)+l-15,c=Math.abs(n-u.position.x);c<=f&&c<r&&(o=u,r=c)}if(o){var p=o.getComponent(x);if(this._inAutoChain){if(this._autoBounceQueue.length>0){var d=this._autoBounceQueue.shift();if(d)return void this.startAutoBounceTo(d)}if(this._inAutoChain=!1,p&&p.kind===C.Spike){var g=this.buildSpikeBounceChain(o,e,this._spikeChainCount);if(g.length>0){var _=g.shift();return this._autoBounceQueue=g,this._inAutoChain=!0,this._spikeChainCount++,void this.startAutoBounceTo(_)}return void this.simpleSpikeBounceFallback(o,e)}this._currentPlatform=o;var v=this.nextKindAndToggle(),y=this.spawnAdjacentPlatform(v);return y&&(this._nextPlatform=y,this.updateCamera()),void(this._winTriggered&&!this._win&&this.finalizeVictory())}if(p&&p.kind===C.Spike){this._currentPlatform=o;var P=this.buildSpikeBounceChain(o,e,this._spikeChainCount);if(0===P.length)this.simpleSpikeBounceFallback(o,e);else{var k=P.shift();this._autoBounceQueue=P,this._inAutoChain=!0,this._spikeChainCount++,this.startAutoBounceTo(k)}var b=this.nextKindAndToggle(),w=this.spawnAdjacentPlatform(b);w&&(this._nextPlatform=w,this.updateCamera())}else{this._currentPlatform=o;var T,A=this.nextKindAndToggle(),B=this.spawnAdjacentPlatform(A);if(B)this._nextPlatform=B,this.updateCamera(),console.log("[Landing] Normal landed -> generated next",null==(T=B.getComponent(x))?void 0:T.kind);this._winTriggered&&!this._win&&this.finalizeVictory()}}else console.log("[Landing] miss all platforms pX=",n.toFixed(1))}},l.buildSpikeBounceChain=function(t,n,e){var i=[];if(0===e){var o=this.findLeftExisting(t,n,C.Normal);return o&&i.push(o),i}var r=this.findLeftAll(t,n,C.Spike).slice(0,e);if(0===r.length)return[];if(i.push.apply(i,r),r.length===e){var a=r[r.length-1],l=this.findLeftExisting(a,n,C.Normal);l&&i.push(l)}return i},l.findLeftExisting=function(t,n,e){var i=t.position.x;return n.filter((function(t){var n;return t.position.x<i&&(null==(n=t.getComponent(x))?void 0:n.kind)===e})).sort((function(t,n){return n.position.x-t.position.x}))[0]||null},l.findLeftAll=function(t,n,e){var i=t.position.x;return n.filter((function(t){var n;return t.position.x<i&&(null==(n=t.getComponent(x))?void 0:n.kind)===e})).sort((function(t,n){return n.position.x-t.position.x}))},l.updateCamera=function(){if(this.camera&&this.player){var t=this.camera.node,n=this.player.position.x+this.cameraOffsetX,e=t.position,i=e.x+.15*(n-e.x),o=this._cameraBaseY+this.cameraOffsetY;t.setPosition(i,o,e.z)}},l.ensureFuturePlatform=function(){if(this.player&&!(this._win||this._normalCount>=51)){var t=this.player.position.x+2e3,n=this.getRightmostPlatform();if(n)for(;;){if(n.position.x+.5*this.getPlatformWidth(n)>=t)break;var e=this.nextKindAndToggle(),i=this.spawnAdjacentPlatform(e);if(!i)break;n=i,this._nextPlatform=i,console.log("[FutureGen] 紧贴补平台 kind=",C[e],"x=",i.position.x)}}},l.checkVictory=function(){var t;if(!this._win&&this.player){for(var n,e=this.player.position.x,o=this.getPlatformsInScene(),r=o.filter((function(t){var n;return t.position.x<e&&(null==(n=t.getComponent(x))?void 0:n.kind)===C.Spike})).length,a=null,l=1/0,s=i(o);!(n=s()).done;){var u=n.value,h=u.getComponent(m),f=h?h.width*u.scale.x*.5:80,c=Math.abs(e-u.position.x);c<=f&&c<l&&(a=u,l=c)}var p=a&&(null==(t=a.getComponent(x))?void 0:t.kind)===C.Normal;r>=40&&p&&(this.finalizeVictory(),console.log("[VictoryTrigger] 条件已满足(>=40 Spike 且落到 Normal)，立即胜利"))}},l.finalizeVictory=function(){this._win||(this._win=!0,this._autoBounceQueue.length=0,this._inAutoChain=!1,c.off(p.EventType.TOUCH_START,this.onTouchStart,this),c.off(p.EventType.TOUCH_END,this.onTouchEnd,this),console.log("[Victory] 已落到 Normal，停止输入"))},l.startAutoBounceTo=function(t){if(this.player&&this._playerCtrl){this._playerCtrl.launchArcToX(t.position.x,900,150,1600),console.log("[AutoBounce] to",t.position.x.toFixed(1))}},l.simpleSpikeBounceFallback=function(t,n){if(this._playerCtrl){var e=t.position.x,i=n.filter((function(t){var n;return t.position.x<e&&(null==(n=t.getComponent(x))?void 0:n.kind)===C.Spike})).sort((function(t,n){return n.position.x-t.position.x}))[0],o=i?i.position.x:e-400;this._playerCtrl.launchArcToX(o,900,150,1400),console.log("[SpikeBounceFallback] targetX=",o.toFixed(1))}},o(n,[{key:"spikeChainCount",get:function(){return this._spikeChainCount}},{key:"isWin",get:function(){return this._win}},{key:"isWinTriggered",get:function(){return this._winTriggered}}]),n}(v)).prototype,"player",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(B.prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(B.prototype,"normalPlatformPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(B.prototype,"spikePlatformPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(B.prototype,"normminDistance",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),z=n(B.prototype,"normmaxDistance",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),D=n(B.prototype,"spikeminDistance",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),G=n(B.prototype,"spikemaxDistance",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),E=n(B.prototype,"cameraOffsetX",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),Y=n(B.prototype,"cameraOffsetY",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-40}}),A=B))||A));l._RF.pop()}}}));

System.register("chunks:///_virtual/HUDController.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"abfaess9rxAmb6cXQS8dE7c","HUDController",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/HUDController2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,l,o,s,f,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Camera,s=e.Node,f=e.Label,u=e.Component}],execute:function(){var p,b,c,y,L,g,h,m,v,k,O,d,z,X,w,C,Y,x,M,P,D,H,N,G,U;a._RF.push({},"ea261zHA/5GgJHrdSmzNApt","HUDController",void 0);var _=l.ccclass,A=l.property;e("HUDController",(p=_("HUDController"),b=A(o),c=A(s),y=A(s),L=A(f),g=A(f),h=A(f),m=A(f),p((O=t((k=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,r(t,"camera",O,n(t)),r(t,"player",d,n(t)),r(t,"gameManagerNode",z,n(t)),r(t,"playerXLabel",X,n(t)),r(t,"labelOffsetX",w,n(t)),r(t,"labelOffsetY",C,n(t)),r(t,"spikeCountLabel",Y,n(t)),r(t,"spikeLabelOffsetX",x,n(t)),r(t,"spikeLabelOffsetY",M,n(t)),r(t,"spikesLeftLabel",P,n(t)),r(t,"spikesLeftLabelOffsetX",D,n(t)),r(t,"spikesLeftLabelOffsetY",H,n(t)),r(t,"victoryLabel",N,n(t)),r(t,"victoryOffsetX",G,n(t)),r(t,"victoryOffsetY",U,n(t)),t}i(t,e);var a=t.prototype;return a.getGameManager=function(){return this.gameManagerNode?this.gameManagerNode.getComponent("GameManager"):null},a.update=function(){var e,t=null==(e=this.camera)?void 0:e.node.position;if(this.playerXLabel&&this.player&&t){var i=this.player.position.x/4;this.playerXLabel.string="当前所在: "+i.toFixed(1)+" m",this.playerXLabel.node.setPosition(t.x+this.labelOffsetX,t.y+this.labelOffsetY,0)}var r=this.getGameManager();if(this.spikeCountLabel&&r&&t){var n=r.spikeChainCount;this.spikeCountLabel.string="已碰地刺次数: "+n,this.spikeCountLabel.node.setPosition(t.x+this.spikeLabelOffsetX,t.y+this.spikeLabelOffsetY,0)}if(this.spikesLeftLabel&&this.player&&r&&t){var a=this.player.position.x,l=r.getPlatformsInScene().filter((function(e){var t=e.getComponent("PlatformType");return e.position.x<a&&t&&1===t.kind})).length;this.spikesLeftLabel.string="已跃地刺数："+l,this.spikesLeftLabel.node.setPosition(t.x+this.spikesLeftLabelOffsetX,t.y+this.spikesLeftLabelOffsetY,0)}this.victoryLabel&&r&&t&&(r.isWin?(this.victoryLabel.string="胜利!",this.victoryLabel.node.active=!0,this.victoryLabel.node.setPosition(t.x+this.victoryOffsetX,t.y+this.victoryOffsetY,0)):this.victoryLabel.node.active=!1)},t}(u)).prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(k.prototype,"player",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(k.prototype,"gameManagerNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(k.prototype,"playerXLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(k.prototype,"labelOffsetX",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-200}}),C=t(k.prototype,"labelOffsetY",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),Y=t(k.prototype,"spikeCountLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(k.prototype,"spikeLabelOffsetX",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-200}}),M=t(k.prototype,"spikeLabelOffsetY",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),P=t(k.prototype,"spikesLeftLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"spikesLeftLabelOffsetX",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-200}}),H=t(k.prototype,"spikesLeftLabelOffsetY",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),N=t(k.prototype,"victoryLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(k.prototype,"victoryOffsetX",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=t(k.prototype,"victoryOffsetY",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=k))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BackgroundScroller.ts","./GameManager.ts","./HUDController2.ts","./ParallaxBackgroundScroller.ts","./PlatformType2.ts","./PlayerController.ts","./PlatformType.ts","./HUDController.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ParallaxBackgroundScroller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,r,o,a,n,e,s,l,c,u,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,r=i.inheritsLoose,o=i.createForOfIteratorHelperLoose,a=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){e=i.cclegacy,s=i._decorator,l=i.Node,c=i.Camera,u=i.UITransform,p=i.Component}],execute:function(){var d,h,g,b,f,x,k,v,w;e._RF.push({},"27581D68o5I67J2KrdXZRYI","ParallaxBackgroundScroller",void 0);var y=s.ccclass,_=s.property;i("ParallaxBackgroundScroller",(d=y("ParallaxBackgroundScroller"),h=_([l]),g=_(c),d((x=t((f=function(i){function t(){for(var t,r=arguments.length,o=new Array(r),e=0;e<r;e++)o[e]=arguments[e];return t=i.call.apply(i,[this].concat(o))||this,a(t,"backgrounds",x,n(t)),a(t,"camera",k,n(t)),a(t,"parallaxFactor",v,n(t)),a(t,"startY",w,n(t)),t._width=0,t._initialized=!1,t}r(t,i);var e=t.prototype;return e.start=function(){this.initBackgrounds(),this.node.parent&&this.node.setSiblingIndex(0)},e.initBackgrounds=function(){if(this.backgrounds.length<2)console.warn("[ParallaxBackgroundScroller] backgrounds 少于2，无法循环");else{var i=this.backgrounds[0].getComponent(u);this._width=i?i.width*this.backgrounds[0].scale.x:720;for(var t=0;t<this.backgrounds.length;t++)this.backgrounds[t].setPosition(t*this._width,this.startY,0);this._initialized=!0}},e.update=function(i){if(this._initialized&&this.camera){for(var t,r=this.camera.node.position.x*this.parallaxFactor,a=this.backgrounds[0],n=this.backgrounds[0],e=o(this.backgrounds);!(t=e()).done;){var s=t.value;s.position.x>a.position.x&&(a=s),s.position.x<n.position.x&&(n=s)}for(var l,c=o(this.backgrounds);!(l=c()).done;){var u=l.value;u.position.x;r-u.position.x>this._width?(u.setPosition(a.position.x+this._width,u.position.y,u.position.z),a=u):u.position.x-r>this._width&&(u.setPosition(n.position.x-this._width,u.position.y,u.position.z),n=u)}}},t}(p)).prototype,"backgrounds",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(f.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(f.prototype,"parallaxFactor",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),w=t(f.prototype,"startY",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-386.8}}),b=f))||b));e._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformType.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"90464s1lgpFTZRjZXA8vZqM","PlatformType",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformType2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,n,i,o,a,l,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,i=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,l=r.Enum,c=r.Component}],execute:function(){var p,u,s,f,y;o._RF.push({},"be156r4ERBC2ZtP+OblATa0","PlatformType",void 0);var m=a.ccclass,d=a.property,P=r("PlatformKind",function(r){return r[r.Normal=0]="Normal",r[r.Spike=1]="Spike",r}({}));r("PlatformType",(p=m("PlatformType"),u=d({type:l(P)}),p((y=e((f=function(r){function e(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=r.call.apply(r,[this].concat(o))||this,n(e,"kind",y,i(e)),e}return t(e,r),e}(c)).prototype,"kind",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.Normal}}),s=f))||s));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,r,o,s,a,h,u,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.math,h=t.Vec3,u=t.EventTarget,c=t.Component}],execute:function(){var l,g,p,f,v;o._RF.push({},"fe18e0fJmZPFrYdfKW7cVRi","PlayerController",void 0);var y=s.ccclass,_=s.property;t("PlayerController",y("PlayerController")((p=i((g=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,n(i,"jumpPowerFactor",p,r(i)),n(i,"gravity",f,r(i)),n(i,"leftBoundaryX",v,r(i)),i.eventTarget=new u,i._groundY=-646.8,i._charging=!1,i._touchStartTime=0,i._vx=0,i._vy=0,i.isJumping=!1,i}e(i,t);var o=i.prototype;return o.setGroundY=function(t){this._groundY=t},o.beginCharge=function(){this.isJumping||(this._charging=!0,this._touchStartTime=performance.now())},o.endChargeAndJumpToX=function(t){if(this._charging&&!this.isJumping){var i=performance.now()-this._touchStartTime,e=a.clamp(i/550,.25,2.2)*this.jumpPowerFactor,n=t>this.node.position.x?1:-1;this._vx=n*e*520,this._vy=980*e,this.isJumping=!0,this._charging=!1}},o.launch=function(t,i){this._vx=t,this._vy=i,this.isJumping=!0,this._charging=!1},o.launchArcToX=function(t,i,e,n){void 0===e&&(e=150),void 0===n&&(n=1600);var r,o=this.node.position.x,s=-2*i/this.gravity;if(s>.05){r=(t-o)/s;var a=Math.abs(r);a>n&&(r=Math.sign(r)*n),a<e&&(r=Math.sign(r)*e)}else r=t>=o?e:-e;this.launch(r,i)},o.update=function(t){if(this._charging){var i=1-.55*a.clamp((performance.now()-this._touchStartTime)/1400,0,.55);this.node.setScale(1,i,1)}else this.isJumping||this.node.setScale(1,1,1);if(this.isJumping){this._vy+=this.gravity*t;var e=this.node.position,n=new h(e.x+this._vx*t,e.y+this._vy*t,0);n.x<this.leftBoundaryX&&(n.x=this.leftBoundaryX,this._vx<0&&(this._vx=0)),n.y<=this._groundY?(n.y=this._groundY,this.node.setPosition(n),this.isJumping=!1,this._vx=0,this._vy=0,this.eventTarget.emit("landed")):this.node.setPosition(n)}},i}(c)).prototype,"jumpPowerFactor",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),f=i(g.prototype,"gravity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-2200}}),v=i(g.prototype,"leftBoundaryX",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-200}}),l=g))||l);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});